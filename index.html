<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flip Stopwatch</title>
<style>
body {
  font-family: system-ui, sans-serif;
  background: #0d1117;
  color: #e6edf3;
  text-align: center;
  padding-top: 5%;
}

h1 { margin-bottom: 2rem; }

.flip-clock {
  display: flex;
  justify-content: center;
  gap: 5px;
  font-size: 3rem;
}

.flip-digit {
  width: 50px;
  height: 70px;
  perspective: 200px;
  position: relative;
}

.top, .bottom, .flip-top, .flip-bottom {
  position: absolute;
  left: 0;
  width: 100%;
  height: 50%;
  line-height: 35px;
  text-align: center;
  background: rgba(0,0,0,0.2);
  border-radius: 6px;
  overflow: hidden;
}

.top { top:0; border-bottom: 1px solid #555; }
.bottom { bottom:0; border-top: 1px solid #555; }

.flip-top, .flip-bottom {
  backface-visibility: hidden;
}

.flip-top {
  top:0;
  transform-origin: bottom;
}
.flip-bottom {
  bottom:0;
  transform-origin: top;
}

.separator {
  display: flex;
  align-items: center;
  font-size: 3rem;
}

button {
  margin-top: 1rem;
  padding: 0.8rem 1.5rem;
  font-size: 1rem;
  cursor: pointer;
  border: none;
  border-radius: 6px;
  background: #238636;
  color: white;
}
</style>
</head>
<body>
<h1>Flip Stopwatch</h1>
<button id="toggle">Keep Awake</button>
<div class="flip-clock" id="flipClock">
  <div class="flip-digit" id="hT"><div class="top">0</div><div class="bottom">0</div></div>
  <div class="flip-digit" id="hO"><div class="top">0</div><div class="bottom">0</div></div>
  <div class="separator">:</div>
  <div class="flip-digit" id="mT"><div class="top">0</div><div class="bottom">0</div></div>
  <div class="flip-digit" id="mO"><div class="top">0</div><div class="bottom">0</div></div>
  <div class="separator">:</div>
  <div class="flip-digit" id="sT"><div class="top">0</div><div class="bottom">0</div></div>
  <div class="flip-digit" id="sO"><div class="top">0</div><div class="bottom">0</div></div>
</div>

<script>
let running = false;
let startTime = 0;
let interval;

const digits = {
  hT: document.getElementById("hT"),
  hO: document.getElementById("hO"),
  mT: document.getElementById("mT"),
  mO: document.getElementById("mO"),
  sT: document.getElementById("sT"),
  sO: document.getElementById("sO")
};

function pad(num){return num.toString().padStart(2,'0');}

function flip(digitElem, newNum){
  const top = digitElem.querySelector(".top");
  const bottom = digitElem.querySelector(".bottom");

  if(top.textContent==newNum) return;

  const flipTop = document.createElement("div");
  flipTop.className = "flip-top";
  flipTop.textContent = top.textContent;

  const flipBottom = document.createElement("div");
  flipBottom.className = "flip-bottom";
  flipBottom.textContent = newNum;

  digitElem.appendChild(flipTop);
  digitElem.appendChild(flipBottom);

  flipTop.style.transform="rotateX(0deg)";
  flipTop.style.transition="transform 0.3s ease-in";
  requestAnimationFrame(()=>flipTop.style.transform="rotateX(-180deg)");

  flipBottom.style.transform="rotateX(180deg)";
  flipBottom.style.transition="transform 0.3s ease-out";
  requestAnimationFrame(()=>flipBottom.style.transform="rotateX(0deg)");

  setTimeout(()=>{
    top.textContent=newNum;
    bottom.textContent=newNum;
    flipTop.remove();
    flipBottom.remove();
  },300);
}

function updateClock(){
  const elapsed = Math.floor((Date.now()-startTime)/1000);
  const h = Math.floor(elapsed/3600);
  const m = Math.floor((elapsed%3600)/60);
  const s = elapsed%60;
  const [h1,h2] = pad(h).split('');
  const [m1,m2] = pad(m).split('');
  const [s1,s2] = pad(s).split('');
  flip(digits.hT,h1);
  flip(digits.hO,h2);
  flip(digits.mT,m1);
  flip(digits.mO,m2);
  flip(digits.sT,s1);
  flip(digits.sO,s2);
}

document.getElementById("toggle").addEventListener("click",()=>{
  if(running){
    clearInterval(interval);
    running=false;
  } else {
    startTime=Date.now();
    interval=setInterval(updateClock,1000);
    running=true;
  }
});
</script>
</body>
</html>
